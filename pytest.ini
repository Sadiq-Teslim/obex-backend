[pytest]
# Test discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Pytest behavior
addopts =
    # Run tests in parallel
    -n auto
    # Show local variables in tracebacks
    --showlocals
    # Report details about skipped and xfailed tests
    -rxXs
    # Verbose output
    -v
    # Generate coverage report
    --cov=app
    --cov-report=term-missing
    --cov-report=html

# Warnings
filterwarnings =
    ignore::DeprecationWarning
    ignore::UserWarning

# Markers
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests that require external services
    cache: marks tests that depend on Redis cache
    mqtt: marks tests that depend on MQTT broker
    serial: marks tests that should not run in parallel

# Coverage settings
[coverage:run]
branch = True
source = app

[coverage:report]
exclude_lines =
    pragma: no cover
    def __repr__
    def __str__
    raise NotImplementedError
    if __name__ == .__main__.:
    pass
    raise AssertionError
    raise NotImplementedError
    if TYPE_CHECKING:
    if typing.TYPE_CHECKING:
    class .*\bProtocol\):
    @(abc\.)?abstractmethod
    if settings.DEBUG:

[coverage:html]
directory = htmlcov